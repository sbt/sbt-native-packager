

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rpm Plugin &mdash; sbt-native-packager 1.11.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/documentation_options.js?v=9080e127"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Docker Plugin" href="docker.html" />
    <link rel="prev" title="Debian Plugin" href="debian.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            sbt-native-packager
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#goals">Goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#core-concepts">Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#format-plugins">Format Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#archetype-plugins">Archetype Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#mappings">Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#architecture">Architecture</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#setup">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#native-tools">Native Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#your-first-package">Your first package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#run-the-app">Run the app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#create-a-package">Create a package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Formats</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="universal.html">Universal Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="universal.html#related-plugins">Related Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universal.html#required-settings">Required Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universal.html#universal-archive-options">Universal Archive Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#getting-started-with-universal-packaging">Getting Started with Universal Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#universal-conventions">Universal Conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#change-remove-top-level-directory-in-output">Change/Remove Top Level Directory in Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#skip-packagedoc-task-on-stage">Skip packageDoc task on stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#mappingshelper">MappingsHelper</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#mapping-examples">Mapping Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="linux.html">Linux Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="linux.html#related-plugins">Related Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="linux.html#required-settings">Required Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="linux.html#package-mappings">Package Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#the-linuxpackagemapping-models">The LinuxPackageMapping Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#modifying-mappings-in-general">Modifying Mappings in General</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#add-mappings">Add Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#filter-remove-mappings">Filter/Remove Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#alter-linuxpackagemapping">Alter LinuxPackageMapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#alter-linuxsymlinks">Alter LinuxSymlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#add-empty-directories">Add Empty Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#man-pages">Man Pages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debian.html">Debian Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debian.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debian.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#jre-dependencies">JRE Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#native-packaging">Native packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#java-based-packaging">Java based packaging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debian.html#customizing-debian-metadata">Customizing Debian Metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#hook-actions-into-the-debian-package-lifecycle">Hook Actions into the Debian Package Lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#use-a-different-castle-directory-for-your-control-scripts">Use a Different Castle Directory for your Control Scripts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Rpm Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#or-higher">1.0 or higher</a></li>
<li class="toctree-l4"><a class="reference internal" href="#or-lower">0.8 or lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#informational-settings">Informational Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependency-settings">Dependency Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#meta-settings">Meta Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scriptlet-settings">Scriptlet Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#systemv-start-script-settings">SystemV Start Script Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rpm-prefix">Rpm Prefix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rpmchangelogfile">rpmChangelogFile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scriptlet-changes">Scriptlet Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scriptlet-migration-from-1-0-x">Scriptlet Migration from 1.0.x</a></li>
<li class="toctree-l4"><a class="reference internal" href="#jar-repackaging">Jar Repackaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#marking-config-files-as-noreplace">Marking config files as <code class="docutils literal notranslate"><span class="pre">noreplace</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="docker.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="docker.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#spotify-java-based-docker-client">Spotify java based docker client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="docker.html#informational-settings">Informational Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#environment-settings">Environment Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#publishing-settings">Publishing Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="docker.html#docker-image-name-and-version">Docker Image Name and Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#docker-base-image">Docker Base Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#docker-repository">Docker Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#docker-image-customization">Docker Image Customization</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#install-location">Install Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#daemon-user">Daemon User</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#file-permission">File Permission</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#custom-dockerfile">Custom Dockerfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#remove-commands">Remove Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#add-commands">Add Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#write-from-scratch">Write from Scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#busybox-ash-support">Busybox/Ash Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="docker.html#init-support">Init support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="windows.html">Windows Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="windows.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="windows.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows.html#or-higher">1.0 or higher</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows.html#or-lower">0.8 or lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="windows.html#feature-configuration">Feature configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jdkpackager.html">JDKPackager Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#enabling">Enabling</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="graalvm-native-image.html">GraalVM Native Image Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="graalvm-native-image.html#requirements">Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="graalvm-native-image.html#native-image-quick-installation"><code class="docutils literal notranslate"><span class="pre">native-image</span></code> quick installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="graalvm-native-image.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="graalvm-native-image.html#required-settings">Required Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="graalvm-native-image.html#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="graalvm-native-image.html#docker-image-build-settings">Docker Image Build Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="graalvm-native-image.html#publishing-settings">Publishing Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="graalvm-native-image.html#graalvm-resources">GraalVM Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="graalvm-native-image.html#tasks">Tasks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/index.html">Archetypes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/java_app/index.html">Java Command Line Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#settings-tasks">Settings &amp; Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#start-script-options">Start script options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#multiple-applications">Multiple Applications</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/index.html#multiple-start-scripts">Multiple start scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/index.html#single-start-script-with-forwarders">Single start script with forwarders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/index.html#a-note-on-script-names">A note on script names</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html">Application and runtime configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html#start-script-customizations">Start script customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html#overriding-templates-bash-bat">Overriding Templates (Bash/Bat)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/java_server/index.html">Java Server Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#settings-tasks">Settings &amp; Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#default-mappings">Default Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html">Application Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#systemloader-configuration">Systemloader Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#package-lifecycle-configuration">Package Lifecycle Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#example-configurations">Example Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/systemloaders.html">Systemloaders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#general-settings">General Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#systemv">SystemV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#systemd">Systemd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#upstart">Upstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#customization">Customization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#start-script-location">Start Script Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#customize-start-script">Customize Start Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#override-start-script">Override Start Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/misc_archetypes.html">Configuration Archetypes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/misc_archetypes.html#ashscript-plugin">AshScript Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/misc_archetypes.html#classpathjar-launcherjar-plugin">ClasspathJar &amp; LauncherJar Plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/jlink_plugin.html">Jlink Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/jlink_plugin.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/jlink_plugin.html#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/cheatsheet.html">An archetype cheatsheet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#path-configurations">Path Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#quick-reference-table">Quick Reference Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#jvm-options">JVM Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#extra-defines">Extra Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#file-application-ini-or-etc-default">File - application.ini or etc-default</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#setting-javaoptions">Setting - javaOptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#overriding-templates">Overriding Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#bat-script-src-templates-bat-template">Bat Script - <code class="docutils literal notranslate"><span class="pre">src/templates/bat-template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#bash-script-src-templates-bash-template">Bash Script - <code class="docutils literal notranslate"><span class="pre">src/templates/bash-template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#service-manager-templates">Service Manager Templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#server-app-config-src-templates-etc-default-systemv-systemd">Server App Config - <code class="docutils literal notranslate"><span class="pre">src/templates/etc-default-{systemv,systemd}</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../recipes/custom.html">Custom Package Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#sbt-assembly">SBT Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#proguard">Proguard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#multi-module-builds">Multi Module Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#custom-packaging-format">Custom Packaging Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/longclasspath.html">Dealing with long classpaths</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#generate-a-launcher-jar">Generate a launcher jar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#generate-a-classpath-jar">Generate a classpath jar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#configure-a-wildcard-classpath">Configure a wildcard classpath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/play.html">Play 2 Packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/play.html#build-configuration">Build Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/play.html#application-configuration">Application Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/play.html#systemv">SystemV</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/deployment.html">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#setup-publish-task">Setup publish Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#default-deployment">Default Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#custom-deployments">Custom Deployments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#rpm">RPM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#debian">Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#custom-configurations">Custom Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id1">Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id2">RPM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id3">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#universal">Universal</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/scalajs.html">Scala JS packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/scalajs.html#package-webjars-and-scalajs-resources">Package webjars and scalajs resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/package_configuration.html">Build the same package with different configs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-sub-modules">SBT sub modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-parameters-and-build-environment">SBT parameters and Build Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-configuration-scope-not-recommended">SBT configuration scope (not recommended)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/embedded-jvm.html">Embedding JVM in Universal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/embedded-jvm.html#adding-the-jvm">Adding the JVM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/embedded-jvm.html#application-configuration">Application Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/umask.html">Setting the umask for your process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/umask.html#within-the-start-script">Within the start script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/umask.html#system-v-systemd">System V/systemd</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sbt-native-packager</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Packaging Formats</a></li>
      <li class="breadcrumb-item active">Rpm Plugin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/formats/rpm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rpm-plugin">
<span id="id1"></span><h1>Rpm Plugin<a class="headerlink" href="#rpm-plugin" title="Link to this heading">¶</a></h1>
<p>RedHat <code class="docutils literal notranslate"><span class="pre">rpm</span></code> files support a number of very advanced features.  To take full advantage of this environment,
it’s best to understand how the <code class="docutils literal notranslate"><span class="pre">rpm</span></code> package system works. <a class="reference external" href="http://fedoraproject.org/wiki/How_to_create_an_RPM_package">How to create an RPM package</a> on the fedora project wiki
is a good tutorial, but it focuses on building packages from <em>source.</em>  The sbt-native-packager assumes that SBT has built your source and generated
<em>binary</em> packages.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rpm plugin depends on the <a class="reference internal" href="linux.html#linux-plugin"><span class="std std-ref">Linux Plugin</span></a>.</p>
</div>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h2>
<p>You need the following applications installed</p>
<ul class="simple">
<li><p>rpm</p></li>
<li><p>rpm-build</p></li>
</ul>
</section>
<section id="build">
<h2>Build<a class="headerlink" href="#build" title="Link to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbt<span class="w"> </span>Rpm/packageBin
</pre></div>
</div>
<section id="required-settings">
<h3>Required Settings<a class="headerlink" href="#required-settings" title="Link to this heading">¶</a></h3>
<p>A rpm package needs some mandatory settings to be valid. Make sure
you have these settings in your build:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">rpmVendor</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;typesafe&quot;</span>
</pre></div>
</div>
</section>
<section id="or-higher">
<h3>1.0 or higher<a class="headerlink" href="#or-higher" title="Link to this heading">¶</a></h3>
<p>Enables the rpm plugin</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">enablePlugins</span><span class="p">(</span><span class="nc">RpmPlugin</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="or-lower">
<h3>0.8 or lower<a class="headerlink" href="#or-lower" title="Link to this heading">¶</a></h3>
<p>For this versions rpm packaging is automatically activated.
See the <a class="reference internal" href="../gettingstarted.html"><span class="doc">Getting Started</span></a> page for information
on how to enable sbt native packager.</p>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>Settings and Tasks inherited from parent plugins can be scoped with <code class="docutils literal notranslate"><span class="pre">Rpm</span></code>.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">linuxPackageMappings</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">linuxPackageMappings</span><span class="p">.</span><span class="n">value</span>
</pre></div>
</div>
</section>
<section id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Link to this heading">¶</a></h2>
<section id="informational-settings">
<h3>Informational Settings<a class="headerlink" href="#informational-settings" title="Link to this heading">¶</a></h3>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">packageName</span></code></dt><dd><p>The name of the package for the rpm.
Its value defines the first component of the rpm file name
(<code class="docutils literal notranslate"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></code>), as well as the <code class="docutils literal notranslate"><span class="pre">Name:</span></code>
tag in the spec file.
Its default value is drawn from <code class="docutils literal notranslate"><span class="pre">Linux</span> <span class="pre">/</span> <span class="pre">packageName</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">version</span></code></dt><dd><p>The version of the package for rpm.
Takes the form <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code>, and note that there can be no dashes in this version string.
It defines the second component of the rpm file name
(<code class="docutils literal notranslate"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></code>), as well as the <code class="docutils literal notranslate"><span class="pre">Version:</span></code>
tag in the spec file.
Its default value is drawn from the project defined <code class="docutils literal notranslate"><span class="pre">version</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmRelease</span></code></dt><dd><p>The release number is the package’s version. When the software is first packaged at a
particular version, the release should be <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>. If the software is repackaged at
the same version, the release number should be incremented, and dropped back to <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>
when the software version is new.
Its value defines the third component of the rpm file name
(<code class="docutils literal notranslate"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></code>), as well as the <code class="docutils literal notranslate"><span class="pre">Release:</span></code>
tag in the spec file.
Its default value is <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">packageArchitecture</span></code></dt><dd><p>The build architecture for the binary rpm.
Its value defines the fourth component of the rpm file name
(<code class="docutils literal notranslate"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></code>), as well as the <code class="docutils literal notranslate"><span class="pre">BuildArch:</span></code>
tag in the spec file.
Its default value is <code class="docutils literal notranslate"><span class="pre">&quot;noarch&quot;</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">packageSummary</span></code></dt><dd><p>A brief, one-line summary of the package.
Note: the summary <strong>must not</strong> contain line separators or end in a period.
Its value defines the <code class="docutils literal notranslate"><span class="pre">Summary:</span></code> tag in the spec file, and its default
value is drawn from <code class="docutils literal notranslate"><span class="pre">Linux</span> <span class="pre">/</span> <span class="pre">packageSummary</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">packageDescription</span></code></dt><dd><p>A longer, multi-line description of the package.
Its value defines the <code class="docutils literal notranslate"><span class="pre">%description</span></code> block in the spec file, and its
default value is drawn from <code class="docutils literal notranslate"><span class="pre">Linux</span> <span class="pre">/</span> <span class="pre">packageDescription</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmVendor</span></code></dt><dd><p>The name of the company/user generating the RPM.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmUrl</span></code></dt><dd><p>A url associated with the software in the RPM.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmLicense</span></code></dt><dd><p>The license associated with software in the RPM.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmEpoch</span></code></dt><dd><p>The epoch is the most significant number used when resolving different versions
for the same RPM. For a given package, packages with the highest epoch will be
used, and in the event of a tie it will fall back to comparing the version and
release.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">packageBin</span> <span class="pre">/</span> <span class="pre">artifactPath</span></code></dt><dd><p>The location of the generated RPM.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="dependency-settings">
<h3>Dependency Settings<a class="headerlink" href="#dependency-settings" title="Link to this heading">¶</a></h3>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rpmAutoreq</span></code></dt><dd><p>Enable or disable the automatic processing of required packages.
Takes the form <code class="docutils literal notranslate"><span class="pre">&quot;yes&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;no&quot;</span></code>, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;yes&quot;</span></code>.
Defines the <code class="docutils literal notranslate"><span class="pre">AutoReq:</span></code> tag in the spec file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmRequirements</span></code></dt><dd><p>The RPM packages that are required to be installed for this RPM to work.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmAutoprov</span></code></dt><dd><p>Enable or disable the automatic processing of provided packages.
Takes the form <code class="docutils literal notranslate"><span class="pre">&quot;yes&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;no&quot;</span></code>, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;yes&quot;</span></code>.
Defines the <code class="docutils literal notranslate"><span class="pre">AutoProv:</span></code> tag in the spec file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmProvides</span></code></dt><dd><p>The RPM package names that this RPM provides.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmPrerequisites</span></code></dt><dd><p>The RPM packages this RPM needs before installation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmObsoletes</span></code></dt><dd><p>The packages this RPM allows you to remove</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmConflicts</span></code></dt><dd><p>The packages this RPM conflicts with and cannot be installed with.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmSetarch[SettingKey[Option[String]]]</span></code></dt><dd><p>Run rpmbuild via Linux <code class="docutils literal notranslate"><span class="pre">setarch</span></code> command.  Use this for cross-platform builds.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="meta-settings">
<h3>Meta Settings<a class="headerlink" href="#meta-settings" title="Link to this heading">¶</a></h3>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rpmPrefix</span></code></dt><dd><p>The path passed set as the base for the revocable package</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmChangelogFile</span></code></dt><dd><p>External file to be imported and used to generate the changelog of the RPM.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="scriptlet-settings">
<h3>Scriptlet Settings<a class="headerlink" href="#scriptlet-settings" title="Link to this heading">¶</a></h3>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">maintainerScripts</span></code></dt><dd><p>Contains the scriptlets being injected into the specs file. Currently supports all
previous scriptlets: <code class="docutils literal notranslate"><span class="pre">%pretrans</span></code>, <code class="docutils literal notranslate"><span class="pre">%pre</span></code>, <code class="docutils literal notranslate"><span class="pre">%verifyscript%</span></code>, <code class="docutils literal notranslate"><span class="pre">%post</span></code>, <code class="docutils literal notranslate"><span class="pre">%posttrans</span></code>,
<code class="docutils literal notranslate"><span class="pre">%preun</span></code> and  <code class="docutils literal notranslate"><span class="pre">%postun</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rpmBrpJavaRepackJars</span></code></dt><dd><p>appends <code class="docutils literal notranslate"><span class="pre">__os_install_post</span></code> scriptlet to <code class="docutils literal notranslate"><span class="pre">rpmPre</span></code> avoiding jar repackaging</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="systemv-start-script-settings">
<h3>SystemV Start Script Settings<a class="headerlink" href="#systemv-start-script-settings" title="Link to this heading">¶</a></h3>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rpmDaemonLogFile</span></code></dt><dd><p>File name of the log generated by application daemon.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Link to this heading">¶</a></h2>
<p>The Rpm plugin support grants the following commands:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Rpm/packageBin</span></code></dt><dd><p>Generates the <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> package for this project.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Rpm/rpmLint</span></code></dt><dd><p>Generates the <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> file and runs the <code class="docutils literal notranslate"><span class="pre">rpmlint</span></code> command to look for issues in the package.  Useful for debugging.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="customize">
<h2>Customize<a class="headerlink" href="#customize" title="Link to this heading">¶</a></h2>
<section id="rpm-prefix">
<h3>Rpm Prefix<a class="headerlink" href="#rpm-prefix" title="Link to this heading">¶</a></h3>
<p>The rpm prefix allows you to create a relocatable package as defined by <a class="reference external" href="http://www.rpm.org/max-rpm/s1-rpm-reloc-prefix-tag.html">http://www.rpm.org/max-rpm/s1-rpm-reloc-prefix-tag.html</a>.
This optional setting with a handful of overrides to scriptlets and templates will allow you to create a working java_server
archetype that can be relocated in the file system.</p>
<p>Example Settings:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">defaultLinuxInstallLocation</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;/opt/package_root&quot;</span><span class="p">,</span>
<span class="n">rpmPrefix</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">defaultLinuxInstallLocation</span><span class="p">),</span>
<span class="n">linuxPackageSymlinks</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">Seq</span><span class="p">.</span><span class="n">empty</span><span class="p">,</span>
<span class="n">defaultLinuxLogsLocation</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">defaultLinuxInstallLocation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span>
</pre></div>
</div>
</section>
<section id="rpmchangelogfile">
<h3>rpmChangelogFile<a class="headerlink" href="#rpmchangelogfile" title="Link to this heading">¶</a></h3>
<p>The rpmChangelogFile property allows you to set a source that will be imported and used on the RPM generation.
So if you use rpm commands to see the changelog it brings that information. You have to create the content in
the changelog file using the RPM conventions that are available here <a class="reference external" href="http://fedoraproject.org/wiki/Packaging:Guidelines#Changelogs">http://fedoraproject.org/wiki/Packaging:Guidelines#Changelogs</a>.</p>
<p>Example Settings:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">changelog</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;changelog.txt&quot;</span>

<span class="n">rpmChangelogFile</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">changelog</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>*<span class="w"> </span>Sun<span class="w"> </span>Aug<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">2014</span><span class="w"> </span>Team<span class="w"> </span>&lt;contact@example.com&gt;<span class="w"> </span>-<span class="w"> </span><span class="m">1</span>.1.0
-Allow<span class="w"> </span>to<span class="w"> </span>login<span class="w"> </span>using<span class="w"> </span>social<span class="w"> </span>networks
*<span class="w"> </span>Wed<span class="w"> </span>Aug<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">2014</span><span class="w"> </span>Team<span class="w"> </span>&lt;contact@example.com&gt;<span class="w"> </span>-<span class="w"> </span><span class="m">1</span>.0.1
-Vulnerability<span class="w"> </span>fix.
*<span class="w"> </span>Tue<span class="w"> </span>Aug<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2014</span><span class="w"> </span>Team<span class="w"> </span>&lt;contact@example.com&gt;<span class="w"> </span>-<span class="w"> </span><span class="m">1</span>.0.0
-First<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>system
</pre></div>
</div>
</section>
<section id="scriptlet-changes">
<h3>Scriptlet Changes<a class="headerlink" href="#scriptlet-changes" title="Link to this heading">¶</a></h3>
<p>Changing scriptlets can be done in two ways:</p>
<ol class="arabic simple">
<li><p>Override the <code class="docutils literal notranslate"><span class="pre">Rpm</span> <span class="pre">/</span> <span class="pre">maintainerScripts</span></code>, or</p></li>
<li><p>Place new scripts in the <code class="docutils literal notranslate"><span class="pre">src/rpm/scriptlets</span></code></p></li>
</ol>
<p>To <strong>override the ``Rpm / maintainerScripts``</strong> you can override the command string explicitly,
create a command string using appends and/or replacements,
or even get a command string from a file source.</p>
<p>For example:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="c1">// overriding</span>
<span class="k">import</span><span class="w"> </span><span class="nc">RpmConstants</span><span class="p">.</span><span class="n">_</span>
<span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">  </span><span class="nc">Pre</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;pre-install&quot;&quot;&quot;&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nc">Post</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;post-install&quot;&quot;&quot;&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nc">Pretrans</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;pretrans&quot;&quot;&quot;&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nc">Posttrans</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;posttrans&quot;&quot;&quot;&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nc">Preun</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;pre-uninstall&quot;&quot;&quot;&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nc">Postun</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;post-uninstall&quot;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1">// appending with strings and replacements</span>
<span class="k">import</span><span class="w"> </span><span class="nc">RpmConstants</span><span class="p">.</span><span class="n">_</span>
<span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">maintainerScriptsAppend</span><span class="p">((</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="p">).</span><span class="n">value</span><span class="p">)(</span>
<span class="w">   </span><span class="nc">Pretrans</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;echo &#39;hello, world&#39;&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nc">Post</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">s&quot;echo &#39;installing </span><span class="si">${</span><span class="p">(</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">packageName</span><span class="p">).</span><span class="n">value</span><span class="si">}</span><span class="s">&#39;&quot;</span>
<span class="p">)</span>

<span class="c1">// appending from a different file</span>
<span class="k">import</span><span class="w"> </span><span class="nc">RpmConstants</span><span class="p">.</span><span class="n">_</span>
<span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">maintainerScriptsAppendFromFile</span><span class="p">((</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="p">).</span><span class="n">value</span><span class="p">)(</span>
<span class="w">   </span><span class="nc">Pretrans</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">sourceDirectory</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;rpm&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;pretrans&quot;</span><span class="p">),</span>
<span class="w">   </span><span class="nc">Post</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">sourceDirectory</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;rpm&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;posttrans&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The helper methods can be found in <a class="reference external" href="http://www.scala-sbt.org/sbt-native-packager/latest/api/#com.typesafe.sbt.packager.MaintainerScriptHelper$">MaintainerScriptHelper Scaladocs</a>.</p>
<p>To <strong>place new scripts in the src/rpm/scriptlets folder</strong>  you simply put the commands into the appropriate scriptlet file.
(The scriptlet file names can be found in the <a class="reference external" href="http://www.scala-sbt.org/sbt-native-packager/latest/api/#com.typesafe.sbt.packager.rpm.RpmPlugin$$Names$">RPM Scaladocs</a>.)</p>
<p><code class="docutils literal notranslate"><span class="pre">src/rpm/scriptlets/preinst</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;PACKAGE_PREFIX=</span><span class="si">${</span><span class="nv">RPM_INSTALL_PREFIX</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/sysconfig/<span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="o">}</span>
...
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">src/rpm/scriptlets/preun</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
rm<span class="w"> </span>/etc/sysconfig/<span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="o">}</span>
...
</pre></div>
</div>
<p>Using scriptlet files like this <em>will override all previous contents.</em></p>
</section>
<section id="scriptlet-migration-from-1-0-x">
<h3>Scriptlet Migration from 1.0.x<a class="headerlink" href="#scriptlet-migration-from-1-0-x" title="Link to this heading">¶</a></h3>
<p>Before</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">rpmPostun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rpmPost</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w">  </span><span class="s">s&quot;&quot;&quot;|</span><span class="si">$</span><span class="n">content</span>
<span class="s">     |echo &quot;I append this to the current content</span>
<span class="s">     |&quot;&quot;&quot;</span><span class="p">.</span><span class="n">stripMargin</span>
<span class="w">  </span><span class="p">}.</span><span class="n">orElse</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nc">Option</span><span class="p">(</span><span class="s">&quot;&quot;&quot;echo &quot;There wasn&#39;t any previous content&quot;</span>
<span class="s">   &quot;&quot;&quot;</span><span class="p">.</span><span class="n">stripMargin</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>After</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="c1">// this gives you easy access to the correct keys</span>
<span class="k">import</span><span class="w"> </span><span class="nc">RpmConstants</span><span class="p">.</span><span class="n">_</span>
<span class="c1">// in order to append you have to pass the initial maintainerScripts map</span>
<span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">maintainerScriptsAppend</span><span class="p">((</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">maintainerScripts</span><span class="p">).</span><span class="n">value</span><span class="p">)(</span>
<span class="w">   </span><span class="nc">Pretrans</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;echo &#39;hello, world&#39;&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nc">Post</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">s&quot;echo &#39;installing </span><span class="si">${</span><span class="p">(</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">packageName</span><span class="p">).</span><span class="n">value</span><span class="si">}</span><span class="s">&#39;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="jar-repackaging">
<h3>Jar Repackaging<a class="headerlink" href="#jar-repackaging" title="Link to this heading">¶</a></h3>
<p>RPM repackages jars by default in order to optimize jars.
Repacking is turned off by default. In order to enable it, set:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">rpmBrpJavaRepackJars</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>Note that this <em>appends</em> content to your <code class="docutils literal notranslate"><span class="pre">Pre</span></code> definition, so make sure not to override it.
For more information on this topic follow these links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/sbt/sbt-native-packager/issues/195">issue #195</a></p></li>
<li><p><a class="reference external" href="https://github.com/sbt/sbt-native-packager/pull/199">pullrequest #199</a></p></li>
<li><p><a class="reference external" href="https://github.com/sbt/sbt-native-packager/issues/215">OpenSuse issue</a></p>
</li>
</ul>
</section>
<section id="marking-config-files-as-noreplace">
<h3>Marking config files as <code class="docutils literal notranslate"><span class="pre">noreplace</span></code><a class="headerlink" href="#marking-config-files-as-noreplace" title="Link to this heading">¶</a></h3>
<p>By default, rpm replaces config files on disk when the content has changed between two version. Often, this is not desirable
as configurations are often customized and should not change during updates. rpm provides a means to turn of the default behaviour
by marking config files as <code class="docutils literal notranslate"><span class="pre">noreplace</span></code> in the spec file. In order to enable this for the build, we provide a helper method that
can be used to modify all config file mappings:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">linuxPackageMappings</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">configWithNoReplace</span><span class="p">((</span><span class="nc">Rpm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">linuxPackageMappings</span><span class="p">).</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>This will mark all config files as <code class="docutils literal notranslate"><span class="pre">noreplace</span></code> and prevent them from being changed during updates. Please note that the <code class="docutils literal notranslate"><span class="pre">linuxPackageMappings</span></code> are scoped to the <code class="docutils literal notranslate"><span class="pre">Rpm</span></code> plugin. This is necessary in order to catch all config files relevant to the rpm package and mark them correctly.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="debian.html" class="btn btn-neutral float-left" title="Debian Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="docker.html" class="btn btn-neutral float-right" title="Docker Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014 sbt-native-packager team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>