

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Docker Plugin &mdash; sbt-native-packager 1.2.0-SNAPSHOT documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="sbt-native-packager 1.2.0-SNAPSHOT documentation" href="../index.html"/>
        <link rel="up" title="Packaging Formats" href="index.html"/>
        <link rel="next" title="Windows Plugin" href="windows.html"/>
        <link rel="prev" title="Rpm Plugin" href="rpm.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> sbt-native-packager
          

          
          </a>

          
            
            
              <div class="version">
                1.2.0-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#goals">Goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#core-concepts">Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#format-plugins">Format Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#archetype-plugins">Archetype Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#mappings">Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#architecture">Architecture</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#setup">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#native-tools">Native Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#your-first-package">Your first package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#run-the-app">Run the app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted.html#create-a-package">Create a package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Formats</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="universal.html">Universal Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="universal.html#related-plugins">Related Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universal.html#required-settings">Required Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="universal.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universal.html#universal-archive-options">Universal Archive Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#getting-started-with-universal-packaging">Getting Started with Universal Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#universal-conventions">Universal Conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#change-remove-top-level-directory-in-output">Change/Remove Top Level Directory in Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#skip-packagedoc-task-on-stage">Skip packageDoc task on stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#mappingshelper">MappingsHelper</a></li>
<li class="toctree-l4"><a class="reference internal" href="universal.html#mapping-examples">Mapping Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="linux.html">Linux Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="linux.html#related-plugins">Related Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="linux.html#required-settings">Required Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="linux.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="linux.html#package-mappings">Package Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#the-linuxpackagemapping-models">The LinuxPackageMapping Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#modifying-mappings-in-general">Modifying Mappings in General</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#add-mappings">Add Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#filter-remove-mappings">Filter/Remove Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#alter-linuxpackagemapping">Alter LinuxPackageMapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#alter-linuxsymlinks">Alter LinuxSymlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#add-empty-directories">Add Empty Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="linux.html#man-pages">Man Pages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debian.html">Debian Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debian.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debian.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#native-packaging">Native packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="debian.html#java-based-packaging">Java based packaging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="debian.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debian.html#customizing-debian-metadata">Customizing Debian Metadata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rpm.html">Rpm Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#or-higher">1.0 or higher</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#or-lower">0.8 or lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#informational-settings">Informational Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#dependency-settings">Dependency Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#meta-settings">Meta Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#scriptlet-settings">Scriptlet Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#systemv-start-script-settings">SystemV Start Script Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpm.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#rpm-prefix">Rpm Prefix</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#rpmchangelogfile">rpmChangelogFile</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#scriptlet-changes">Scriptlet Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#scriptlet-migration-from-1-0-x">Scriptlet Migration from 1.0.x</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpm.html#jar-repackaging">Jar Repackaging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Docker Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spotify-java-based-docker-client">Spotify java based docker client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#informational-settings">Informational Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-settings">Environment Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishing-settings">Publishing Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#docker-image-name">Docker Image Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-base-image">Docker Base Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-repository">Docker Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-image-customization">Docker Image Customization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-location">Install Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-dockerfile">Custom Dockerfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-commands">Remove Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-commands">Add Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#write-from-scratch">Write from Scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#busybox-ash-support">Busybox/Ash Support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="windows.html">Windows Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="windows.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#build">Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="windows.html#required-settings">Required Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows.html#or-higher">1.0 or higher</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows.html#or-lower">0.8 or lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="windows.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="windows.html#feature-configuration">Feature configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jdkpackager.html">JDKPackager Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#enabling">Enabling</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdkpackager.html#debugging">Debugging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/index.html">Archetypes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/java_app/index.html">Java Command Line Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#settings-tasks">Settings &amp; Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#start-script-options">Start script options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_app/index.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html">Application and runtime configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html#start-script-customizations">Start script customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_app/customize.html#overriding-templates-bash-bat">Overriding Templates (Bash/Bat)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/java_server/index.html">Java Server Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#settings-tasks">Settings &amp; Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#default-mappings">Default Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/java_server/index.html#customize">Customize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html">Application Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#systemloader-configuration">Systemloader Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#package-lifecycle-configuration">Package Lifecycle Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/java_server/customize.html#example-configurations">Example Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/systemloaders.html">Systemloaders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#general-settings">General Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#systemv">SystemV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#systemd">Systemd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#upstart">Upstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/systemloaders.html#customization">Customization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#start-script-location">Start Script Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#customize-start-script">Customize Start Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/systemloaders.html#override-start-script">Override Start Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/misc_archetypes.html">Configuration Archetypes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/misc_archetypes.html#ashscript-plugin">AshScript Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/misc_archetypes.html#classpathjar-launcherjar-plugin">ClasspathJar &amp; LauncherJar Plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../archetypes/cheatsheet.html">An archetype cheatsheet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#path-configurations">Path Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#quick-reference-table">Quick Reference Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#jvm-options">JVM Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#extra-defines">Extra Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#file-application-ini-or-etc-default">File - application.ini or etc-default</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#setting-javaoptions">Setting - javaOptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../archetypes/cheatsheet.html#overriding-templates">Overriding Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#bat-script-src-templates-bat-template">Bat Script - <code class="docutils literal"><span class="pre">src/templates/bat-template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#bash-script-src-templates-bash-template">Bash Script - <code class="docutils literal"><span class="pre">src/templates/bash-template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#service-manager">Service Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../archetypes/cheatsheet.html#server-app-config-src-templates-etc-default-systemv-systemd">Server App Config - <code class="docutils literal"><span class="pre">src/templates/etc-default-{systemv,systemd}</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../recipes/custom.html">Custom Package Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#sbt-assembly">SBT Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#proguard">Proguard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#multi-module-builds">Multi Module Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/custom.html#custom-packaging-format">Custom Packaging Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/longclasspath.html">Dealing with long classpaths</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#generate-a-launcher-jar">Generate a launcher jar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#generate-a-classpath-jar">Generate a classpath jar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/longclasspath.html#configure-a-wildcard-classpath">Configure a wildcard classpath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/play.html">Play 2 Packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/play.html#build-configuration">Build Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/play.html#application-configuration">Application Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/play.html#systemv">SystemV</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/deployment.html">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#setup-publish-task">Setup publish Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#default-deployment">Default Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#custom-deployments">Custom Deployments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#rpm">RPM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#debian">Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/deployment.html#custom-configurations">Custom Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id1">Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id2">RPM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#id3">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../recipes/deployment.html#universal">Universal</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/scalajs.html">Scala JS packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/scalajs.html#package-webjars-and-scalajs-resources">Package webjars and scalajs resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/package_configuration.html">Build the same package with different configs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-sub-modules">SBT sub modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-parameters-and-build-environment">SBT parameters and Build Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../recipes/package_configuration.html#sbt-configuration-scope-not-recommended">SBT configuration scope (not recommended)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">sbt-native-packager</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Packaging Formats</a> &raquo;</li>
      
    <li>Docker Plugin</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/formats/docker.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="docker-plugin">
<span id="id1"></span><h1>Docker Plugin<a class="headerlink" href="#docker-plugin" title="Permalink to this headline">¶</a></h1>
<p>Docker images describe how to set up a container for running an application, including what files are present, and what program to run.</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.docker.com/introduction/understanding-docker/">https://docs.docker.com/introduction/understanding-docker/</a> provides an introduction to Docker.
<a class="reference external" href="https://docs.docker.com/reference/builder/">https://docs.docker.com/reference/builder/</a> describes the Dockerfile; a file which describes how to set up the image.</p>
<p>sbt-native-packager focuses on creating a Docker image which can &#8220;just run&#8221; the application built by SBT.</p>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The docker plugin depends on the <a class="reference internal" href="universal.html#universal-plugin"><span>Universal Plugin</span></a>.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>You need the docker console client installed and version <cite>1.3</cite> or higher is required.
SBT Native Packager doesn&#8217;t use the REST API, but instead uses the CLI directly.</p>
<p>It is currently not possible to provide authentication for Docker repositories from within the build.
The <code class="docutils literal"><span class="pre">docker</span></code> binary used by the build should already have been configured with the appropriate
authentication details. See <a class="reference external" href="https://docs.docker.com/reference/commandline/cli/#login">https://docs.docker.com/reference/commandline/cli/#login</a>.</p>
</div>
<div class="section" id="build">
<h2>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sbt docker:publishLocal
</pre></div>
</div>
<div class="section" id="required-settings">
<h3>Required Settings<a class="headerlink" href="#required-settings" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">DockerPlugin</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="spotify-java-based-docker-client">
<h3>Spotify java based docker client<a class="headerlink" href="#spotify-java-based-docker-client" title="Permalink to this headline">¶</a></h3>
<p>You can also use the java-based spotify Docker client. Add this to your <code class="docutils literal"><span class="pre">build.sbt</span></code></p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">DockerSpotifyClientPlugin</span><span class="o">)</span>
</pre></div>
</div>
<p>and this to your <code class="docutils literal"><span class="pre">plugins.sbt</span></code></p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;com.spotify&quot;</span> <span class="o">%</span> <span class="s">&quot;docker-client&quot;</span> <span class="o">%</span> <span class="s">&quot;3.5.13&quot;</span>
</pre></div>
</div>
<p>The Docker-spotify client is a provided dependency so you have to add it on your own.
It brings a lot of dependencies that could slow your build times. This is the reason
the dependency is marked as provided.</p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Settings and Tasks inherited from parent plugins can be scoped with <code class="docutils literal"><span class="pre">Docker</span></code>.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">mappings</span> <span class="n">in</span> <span class="nc">Docker</span> <span class="o">:=</span> <span class="n">mappings</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="informational-settings">
<h3>Informational Settings<a class="headerlink" href="#informational-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal"><span class="pre">packageName</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>The name of the package for Docker (if different from general name).
This will only affect the image name.</dd>
<dt><code class="docutils literal"><span class="pre">version</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>The version of the package for Docker (if different from general version).  Often takes the form <code class="docutils literal"><span class="pre">x.y.z</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">maintainer</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>The maintainer of the package, required by the Dockerfile format.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="environment-settings">
<h3>Environment Settings<a class="headerlink" href="#environment-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal"><span class="pre">dockerBaseImage</span></code></dt>
<dd>The image to use as a base for running the application. It should include binaries on the path for <code class="docutils literal"><span class="pre">chown</span></code>, <code class="docutils literal"><span class="pre">mkdir</span></code>, have a discoverable <code class="docutils literal"><span class="pre">java</span></code> binary, and include the user configured by <code class="docutils literal"><span class="pre">daemonUser</span></code> (<code class="docutils literal"><span class="pre">daemon</span></code>, by default).</dd>
<dt><code class="docutils literal"><span class="pre">daemonUser</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>The user to use when executing the application. Files below the install path also have their ownership set to this user.</dd>
<dt><code class="docutils literal"><span class="pre">dockerExposedPorts</span></code></dt>
<dd>A list of ports to expose from the Docker image.</dd>
<dt><code class="docutils literal"><span class="pre">dockerExposedVolumes</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>A list of data volumes to make available in the Docker image.</dd>
<dt><code class="docutils literal"><span class="pre">dockerEntrypoint</span> <span class="pre">in</span> <span class="pre">Docker</span></code></dt>
<dd>Overrides the default entrypoint for docker-specific service discovery tasks before running the application.
Defaults to the bash executable script, available at <code class="docutils literal"><span class="pre">bin/&lt;script</span> <span class="pre">name&gt;</span></code> in the current <code class="docutils literal"><span class="pre">WORKDIR</span></code> of <code class="docutils literal"><span class="pre">/opt/docker</span></code>.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="publishing-settings">
<h3>Publishing Settings<a class="headerlink" href="#publishing-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal"><span class="pre">dockerRepository</span></code></dt>
<dd>The repository to which the image is pushed when the <code class="docutils literal"><span class="pre">docker:publish</span></code> task is run. This should be of the form <code class="docutils literal"><span class="pre">[username]</span></code> (assumes use of the <code class="docutils literal"><span class="pre">index.docker.io</span></code> repository) or <code class="docutils literal"><span class="pre">[repository.host]/[username]</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">dockerUpdateLatest</span></code></dt>
<dd>The flag to automatic update the latest tag when the <code class="docutils literal"><span class="pre">docker:publish</span></code> task is run. Default value is <code class="docutils literal"><span class="pre">FALSE</span></code>.</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>The Docker support provides the following commands:</p>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal"><span class="pre">docker:stage</span></code></dt>
<dd>Generates a directory with the Dockerfile and environment prepared for creating a Docker image.</dd>
<dt><code class="docutils literal"><span class="pre">docker:publishLocal</span></code></dt>
<dd>Builds an image using the local Docker server.</dd>
<dt><code class="docutils literal"><span class="pre">docker:publish</span></code></dt>
<dd>Builds an image using the local Docker server, and pushes it to the configured remote repository.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="customize">
<h2>Customize<a class="headerlink" href="#customize" title="Permalink to this headline">¶</a></h2>
<p>There are some predefined settings, which you can easily customize. These
settings are explained in some detail in the next sections. If you want to
describe your Dockerfile completely yourself, you can provide your own
<cite>docker commands</cite> as described in <a class="reference internal" href="#custom-dockerfile">Custom Dockerfile</a>.</p>
<div class="section" id="docker-image-name">
<h3>Docker Image Name<a class="headerlink" href="#docker-image-name" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">packageName</span> <span class="n">in</span> <span class="nc">Docker</span> <span class="o">:=</span> <span class="n">packageName</span><span class="o">.</span><span class="n">value</span>

<span class="n">version</span> <span class="n">in</span> <span class="nc">Docker</span> <span class="o">:=</span> <span class="n">version</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
<div class="section" id="docker-base-image">
<h3>Docker Base Image<a class="headerlink" href="#docker-base-image" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">dockerBaseImage</span> <span class="o">:=</span> <span class="s">&quot;dockerfile/java&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="docker-repository">
<h3>Docker Repository<a class="headerlink" href="#docker-repository" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">dockerRepository</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;dockeruser&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="docker-image-customization">
<h3>Docker Image Customization<a class="headerlink" href="#docker-image-customization" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">dockerExposedPorts</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">9000</span><span class="o">,</span> <span class="mi">9443</span><span class="o">)</span>

<span class="n">dockerExposedVolumes</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;/opt/docker/logs&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>In order to work properly with <cite>USER daemon</cite> the exposed volumes are first
created (if they do not existend) and chowned.</p>
</div>
<div class="section" id="install-location">
<h3>Install Location<a class="headerlink" href="#install-location" title="Permalink to this headline">¶</a></h3>
<p>The path to which the application is written can be changed with the setting.
The files from <code class="docutils literal"><span class="pre">mappings</span> <span class="pre">in</span> <span class="pre">Docker</span></code> are extracted underneath this directory.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">defaultLinuxInstallLocation</span> <span class="n">in</span> <span class="nc">Docker</span> <span class="o">:=</span> <span class="s">&quot;/opt/docker&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-dockerfile">
<h3>Custom Dockerfile<a class="headerlink" href="#custom-dockerfile" title="Permalink to this headline">¶</a></h3>
<p>All settings before are used to create a single sequence of docker commands.
You have the option to write all of them on your own, filter or change existing
commands or simply add some.</p>
<p>First of all you should take a look what you docker commands look like.
In your sbt console type</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>&gt; show dockerCommands
<span class="o">[</span>info<span class="o">]</span> List<span class="o">(</span>Cmd<span class="o">(</span>FROM,dockerfile/java:latest<span class="o">)</span>, Cmd<span class="o">(</span>MAINTAINER,Your Name &lt;y.n@yourcompany.com&gt;<span class="o">)</span>, ...<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-commands">
<h3>Remove Commands<a class="headerlink" href="#remove-commands" title="Permalink to this headline">¶</a></h3>
<p>SBT Native Packager added some commands you may not need. For example
the chowning of a exposed volume.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.typesafe.sbt.packager.docker._</span>

<span class="c1">// we want to filter the chown command for &#39;/data&#39;</span>
<span class="n">dockerExposedVolumes</span> <span class="o">+=</span> <span class="s">&quot;/data&quot;</span>

<span class="n">dockerCommands</span> <span class="o">:=</span> <span class="n">dockerCommands</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">filterNot</span> <span class="o">{</span>

  <span class="c1">// ExecCmd is a case class, and args is a varargs variable, so you need to bind it with @</span>
  <span class="k">case</span> <span class="nc">ExecCmd</span><span class="o">(</span><span class="s">&quot;RUN&quot;</span><span class="o">,</span> <span class="n">args</span> <span class="k">@</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="s">&quot;chown&quot;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">args</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="s">&quot;/data&quot;</span><span class="o">)</span>

  <span class="c1">// dont filter the rest</span>
  <span class="k">case</span> <span class="n">cmd</span>                       <span class="k">=&gt;</span> <span class="kc">false</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-commands">
<h3>Add Commands<a class="headerlink" href="#add-commands" title="Permalink to this headline">¶</a></h3>
<p>Adding commands is as straightforward as adding anything in a list.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.typesafe.sbt.packager.docker._</span>

<span class="n">dockerCommands</span> <span class="o">+=</span> <span class="nc">Cmd</span><span class="o">(</span><span class="s">&quot;USER&quot;</span><span class="o">,</span> <span class="n">daemonUser</span><span class="o">.</span><span class="n">value</span><span class="o">)</span>

<span class="n">dockerCommands</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="c1">// setting the run script executable</span>
  <span class="nc">ExecCmd</span><span class="o">(</span><span class="s">&quot;RUN&quot;</span><span class="o">,</span>
    <span class="s">&quot;chmod&quot;</span><span class="o">,</span> <span class="s">&quot;u+x&quot;</span><span class="o">,</span>
     <span class="s">s&quot;</span><span class="si">${</span><span class="o">(</span><span class="n">defaultLinuxInstallLocation</span> <span class="n">in</span> <span class="nc">Docker</span><span class="o">).</span><span class="n">value</span><span class="si">}</span><span class="s">/bin/</span><span class="si">${</span><span class="n">executableScriptName</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s">&quot;</span><span class="o">),</span>
  <span class="c1">// setting a daemon user</span>
  <span class="nc">Cmd</span><span class="o">(</span><span class="s">&quot;USER&quot;</span><span class="o">,</span> <span class="s">&quot;daemon&quot;</span><span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="write-from-scratch">
<h3>Write from Scratch<a class="headerlink" href="#write-from-scratch" title="Permalink to this headline">¶</a></h3>
<p>You can simply wipe out all docker commands with</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">dockerCommands</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">()</span>
</pre></div>
</div>
<p>Now let&#8217;s start adding some Docker commands.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com.typesafe.sbt.packager.docker._</span>

<span class="n">dockerCommands</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="nc">Cmd</span><span class="o">(</span><span class="s">&quot;FROM&quot;</span><span class="o">,</span> <span class="s">&quot;dockerfile/java:latest&quot;</span><span class="o">),</span>
  <span class="nc">Cmd</span><span class="o">(</span><span class="s">&quot;MAINTAINER&quot;</span><span class="o">,</span> <span class="n">maintainer</span><span class="o">.</span><span class="n">value</span><span class="o">),</span>
  <span class="nc">ExecCmd</span><span class="o">(</span><span class="s">&quot;CMD&quot;</span><span class="o">,</span> <span class="s">&quot;echo&quot;</span><span class="o">,</span> <span class="s">&quot;Hello, World from Docker&quot;</span><span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="busybox-ash-support">
<h3>Busybox/Ash Support<a class="headerlink" href="#busybox-ash-support" title="Permalink to this headline">¶</a></h3>
<p>The default shell support for the Java archetype (JavaAppPackaging) is bash, with a Windows
bat file also generated.  Busybox is a popular minimal Docker base image that uses ash, a much
more limited shell than bash.  The result is that if you build a Docker image for Busybox the
generated bash launch script will likely not work.</p>
<p>Optionally you can use an ash-compatible archetype that derives from JavaAppPacking called
AshScriptPlugin.  Enable this by including:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">AshScriptPlugin</span><span class="o">)</span>
</pre></div>
</div>
<p>With this plugin enabled an ash-compatible launch script will be generated in your Docker image.</p>
<p>Just like for JavaAppPackaging you have the option of overriding the default script by supplying
your own src/templates/ash-template file.  When overriding the file don&#8217;t forget to include
${{template_declares}} somewhere to populate $app_classpath $app_mainclass from your sbt project.
You&#8217;ll likely need these to launch your program.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="windows.html" class="btn btn-neutral float-right" title="Windows Plugin" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rpm.html" class="btn btn-neutral" title="Rpm Plugin" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 sbt-native-packager team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.0-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
